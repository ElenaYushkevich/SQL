# SQL
```
1. Чем отличается SQL и MySQL?
```
SQL — стандартный язык структурированных запросов (Structured Query Language) на основе английского языка, тогда как MySQL — система управления базами данных. SQL — язык реляционной базы данных, который используется для доступа и управления данными, MySQL — реляционная СУБД (система управления базами данных), также как и SQL Server, Informix и т. д.
```
2. Какие есть подмножества SQL?
```
* DDL (Data Definition Language, язык описания данных) — позволяет выполнять различные операции с базой данных, такие как CREATE (создание), ALTER (изменение) и DROP (удаление объектов).
* DML (Data Manipulation Language, язык управления данными) — позволяет получать доступ к данным и манипулировать ими, например, вставлять, обновлять, удалять и извлекать данные из базы данных.
* DCL (Data Control Language, язык контролирования данных) — позволяет контролировать доступ к базе данных. Пример — GRANT (предоставить права), REVOKE (отозвать права).
```
3. Что такое СУБД?
```
База данных — структурированная коллекция данных. Система управления базами данных (СУБД) — программное обеспечение, которое взаимодействует с пользователем, приложениями и самой базой данных для сбора и анализа данных. СУБД позволяет пользователю взаимодействовать с базой данных. Данные, хранящиеся в базе данных, могут быть изменены, извлечены и удалены. Они могут быть любых типов, таких как строки, числа, изображения и т. д.
```
4. Какие существуют два типа СУБД? (реляц и нереляц)
```
* Реляционная система управления базами данных: данные хранятся в отношениях (таблицах). Пример — MySQL.
* Нереляционная система управления базами данных: не существует понятия отношений, кортежей и атрибутов. Пример — Mongo.
```
5. Что такое соединения в SQL? JOIN?
```
Для соединения строк из двух или более таблиц на основе связанного между ними столбца используется оператор JOIN. Он используется для объединения двух таблиц или получения данных оттуда. В SQL есть 4 типа соединения, а именно:
* Inner Join (Внутреннее соединение)
* Right Join (Правое соединение)
* Left Join (Левое соединение)
* Full Join (Полное соединение)
```
6. В чем разница между типом данных CHAR и VARCHAR в SQL?
```
И Char, и Varchar служат символьными типами данных, но varchar используется для строк символов переменной длины, тогда как Char используется для строк фиксированной длины. Например, char(10) может хранить только 10 символов и не сможет хранить строку любой другой длины, тогда как varchar(10) может хранить строку любой длины до 10, т.е. например 6, 8 или 2.
```
7. Что такое первичный ключ (Primary key)? Что такое уникальный ключ (Unique key)? нот нал и автинкремент
```
Primary key:
* Первичный ключ — столбец или набор столбцов, которые однозначно идентифицируют каждую строку в таблице.
* Однозначно идентифицирует одну строку в таблице
* Нулевые (Null) значения не допускаются

Unique key:
* Однозначно идентифицирует одну строку в таблице.
* Допустимо множество уникальных ключей в одной таблице.
* Допустимы NULL-значения (прим. перевод.: зависит от СУБД, в SQL Server значение NULL может быть добавлено только один раз в поле с UNIQUE KEY).
```
8. Какие есть ограничения на столбиках при создании? 
```
Ограничения (constraints) используются для указания ограничения на тип данных таблицы. Они могут быть указаны при создании или изменении таблицы. 

Пример ограничений:
* NOT NULL
* CHECK
* DEFAULT
* UNIQUE
* PRIMARY KEY
* FOREIGN KEY
```
9. Что такое внешний ключ (Foreign key)?
```
* Внешний ключ поддерживает ссылочную целостность, обеспечивая связь между данными в двух таблицах.
* Внешний ключ в дочерней таблице ссылается на первичный ключ в родительской таблице.
* Ограничение внешнего ключа предотвращает действия, которые разрушают связи между дочерней и родительской таблицами.
```
10. Что такое целостность данных в таблицах?
```
Целостность данных определяет точность, а также согласованность данных, хранящихся в базе данных. Она также определяет ограничения целостности для обеспечения соблюдения бизнес-правил для данных, когда они вводятся в приложение или базу данных.
```
11. В чём разница между кластеризованным и некластеризованным индексами в SQL?
```
1. Различия между кластеризованным и некластеризованным индексами в SQL:
Кластерный индекс используется для простого и быстрого извлечения данных из базы данных, тогда как чтение из некластеризованного индекса происходит относительно медленнее.
2. Кластеризованный индекс изменяет способ хранения записей в базе данных — он сортирует строки по столбцу, который установлен как кластеризованный индекс, тогда как в некластеризованном индексе он не меняет способ хранения, но создает отдельный объект внутри таблицы, который указывает на исходные строки таблицы при поиске.
3. Одна таблица может иметь только один кластеризованный индекс, тогда как некластеризованных у нее может быть много.
```
12. Каким SQL запросом можно вывести текущую дату? (в каждой субд)
```
В SQL есть встроенная функция GetDate (), которая помогает возвращать текущий timestamp/дату.
```
13. Что такое денормализация данных?
```
Денормализация — техника, которая используется для преобразования из высших к низшим нормальным формам. Она помогает разработчикам баз данных повысить производительность всей инфраструктуры, поскольку вносит избыточность в таблицу. Она добавляет избыточные данные в таблицу, учитывая частые запросы к базе данных, которые объединяют данные из разных таблиц в одну таблицу.
```
14. Что такое нормализация данных? (1НФ, 2НФ, 3НФ)
```
Нормализация — процесс организации данных, цель которого избежать дублирования и избыточности. Некоторые из преимуществ:
* Лучшая организация базы данных
* Больше таблиц с небольшими строками
* Эффективный доступ к данным
* Большая гибкость для запросов
* Быстрый поиск информации
* Проще реализовать безопасность данных
* Позволяет легко модифицировать
* Сокращение избыточных и дублирующихся данных
* Более компактная база данных
* Обеспечивает согласованность данных после внесения изменений

Существует много последовательных уровней нормализации. Это так называемые нормальные формы. Каждая последующая нормальная форма включает предыдущую. Первых трех нормальных форм обычно достаточно.
* Первая нормальная форма (1NF) — нет повторяющихся групп в строках
* Вторая нормальная форма (2NF) — каждое неключевое (поддерживающее) значение столбца зависит от всего первичного ключа
* Третья нормальная форма (3NF) — каждое неключевое значение зависит только от первичного ключа и не имеет зависимости от другого неключевого значения столбца
```
15. Что такое сущности в БД? 
```
Сущности: человек, место или объект в реальном мире, данные о которых могут храниться в базе данных. В таблицах хранятся данные, которые представляют один тип сущности. Например — база данных банка имеет таблицу клиентов для хранения информации о клиентах. Таблица клиентов хранит эту информацию в виде набора атрибутов (столбцы в таблице) для каждого клиента.
```
16. Что такое отношения в БД? 
```
Отношения: отношения или связи между сущностями, которые имеют какое-то отношение друг к другу. Например — имя клиента связано с номером учетной записи клиента и контактной информацией, которая может быть в той же таблице. Также могут быть отношения между отдельными таблицами (например, клиент к счетам).
```
17. Что такое индекс в БД? Типы индексов: уникальный, кластеризованные, некластеризованный?
```
Индексы относятся к методу настройки производительности, позволяющему быстрее извлекать записи из таблицы. Индекс создает отдельную структуру для индексируемого поля и, следовательно, позволяет быстрее получать данные.
Есть три типа индексов, а именно:
1. Уникальный индекс (Unique Index): этот индекс не позволяет полю иметь повторяющиеся значения, если столбец индексируется уникально. Если первичный ключ определен, уникальный индекс может быть применен автоматически.
2. Кластеризованный индекс (Clustered Index): этот индекс меняет физический порядок таблицы и выполняет поиск на основе значений ключа. Каждая таблица может иметь только один кластеризованный индекс.
3. Некластеризованный индекс (Non-Clustered Index): не изменяет физический порядок таблицы и поддерживает логический порядок данных. Каждая таблица может иметь много некластеризованных индексов.
```
18. Чем отличается DROP, DELETE, TRUNCATE?
```
Команда DROP удаляет саму таблицу, и нельзя сделать Rollback команды, тогда как команда TRUNCATE удаляет все строки из таблицы (прим. перевод.: в SQL Server Rollback нормально отработает и откатит DROP).

DELETE Используется для удаления строки в таблице, Вы можете восстановить данные после удаления.

TRUNCATE Используется для удаления всех строк из таблицы, Вы не можете восстановить данные (прим. перевод.: операции логируются по разному, но в SQL Server есть возможность сделать откат) транзакции)
```
19. Что такое свойства acid?
```
ACID означает атомарность (Atomicity), согласованность (Consistency), изолированность (Isolation), долговечность (Durability). Он используется для обеспечения надежной обработки транзакций данных в системе базы данных.

**Атомарность.** Гарантирует, что транзакция будет полностью выполнена или потерпит неудачу, где транзакция представляет одну логическую операцию данных. Это означает, что при сбое одной части любой транзакции происходит сбой всей транзакции и состояние базы данных остается неизменным.

**Согласованность.** Гарантирует, что данные должны соответствовать всем правилам валидации. Проще говоря, вы можете сказать, что ваша транзакция никогда не оставит вашу базу данных в недопустимом состоянии.

**Изолированность.** Основной целью изолированности является контроль механизма параллельного изменения данных.

**Долговечность.** Долговечность подразумевает, что если транзакция была подтверждена (COMMIT), произошедшие в рамках транзакции изменения сохранятся независимо от того, что может встать у них на пути (например, потеря питания, сбой или ошибки любого рода).
```
20. Какие операторы доступны в SQL?
```
В SQL доступно три типа оператора, а именно:
* Арифметические Операторы
* Логические Операторы
* Операторы сравнения
```
21. Совпадают ли значения NULL со значениями нуля или пробела?
```
Значение NULL вовсе не равно нулю или пробелу. Значение NULL представляет значение, которое недоступно, неизвестно, присвоено или неприменимо, тогда как ноль — это число, а пробел — символ.
```
22. В чем разница между перекрестным (cross join) и естественным (natural join) соединением?
```
Перекрестное соединение создает перекрестное или декартово произведение двух таблиц, тогда как естественное соединение основано на всех столбцах, имеющих одинаковое имя и типы данных в обеих таблицах.
```
23. Что такое подзапросы в SQL?
```
Подзапрос — это запрос внутри другого запроса, в котором определен запрос для извлечения данных или информации из базы данных. В подзапросе внешний запрос называется основным запросом, тогда как внутренний запрос называется подзапросом. Подзапросы всегда выполняются первыми, а результат подзапроса передается в основной запрос. Он может быть вложен в SELECT, UPDATE или любой другой запрос. Подзапрос также может использовать любые операторы сравнения, такие как >, < или =.
```
24. Что делает в подзапросах команды any и all?
```
Операторы ANY и ALL позволяют выполнять сравнение между значением одного столбца и диапазоном других значений.

Оператор ANY возвращает true, если какое-либо из значений подзапроса соответствует условию. Оператор ALL возвращает true, если все значения подзапроса удовлетворяют условию.

Оператор ANY:
* в результате возвращает логическое значение
* возвращает TRUE, если ЛЮБОЕ из значений подзапроса удовлетворяет условию
* ANY означает, что условие будет истинным, если операция истинна для любого из значений в диапазоне.

Оператор ALL:

* в результате возвращает логическое значение
* возвращает TRUE, если ВСЕ значения подзапроса соответствуют условию
* используется с операторами SELECT, WHERE и HAVING
* ALL означает, что условие будет истинным только в том случае, если операция истинна для всех значений в диапазоне. 
```
25. Какие бывают типы подзапросов?
```
Существует два типа подзапросов, а именно: коррелированные и некоррелированные.
* **Коррелированный подзапрос:** это запрос, который выбирает данные из таблицы со ссылкой на внешний запрос. Он не считается независимым запросом, поскольку ссылается на другую таблицу или столбец в таблице.
* **Некоррелированный подзапрос:** этот запрос является независимым запросом, в котором выходные данные подзапроса подставляются в основной запрос.
```
26. Каким запросом в SQL можно вывести количесво строк в БД?
```
Для подсчета количества записей в таблице вы можете использовать следующие команды:

SELECT * FROM table1

SELECT COUNT(*) FROM table1

SELECT rows FROM sysindexes WHERE id = OBJECT_ID(table1) AND indid < 2

